<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bus Management System</title>
</head>
<body>
    <h1>Bus Management System</h1>
    <label for="scheduleId">Enter Schedule ID:</label>
    <input type="number" id="scheduleId">
    <button onclick="getScheduleDetails()">Get Schedule Details</button>
    <div id="scheduleDetails"></div>

    <h2>Issue Ticket</h2>
    <label for="seatNumber">Enter Seat Number:</label>
    <input type="number" id="seatNumber">
    <button onclick="issueTicket()">Issue Ticket</button>
    <div id="ticketIssued"></div>

    <script src="https://cdn.jsdelivr.net/npm/web3@1.6.0/dist/web3.min.js"></script>
    <script>
        const contractAddress = 'YOUR_CONTRACT_ADDRESS';
        const abi = YOUR_CONTRACT_ABI;
        const web3 = new Web3(Web3.givenProvider || 'http://localhost:8545'); // Use Infura or your local node URL

        const contract = new web3.eth.Contract(abi, contractAddress);

        async function getScheduleDetails() {
            const scheduleId = document.getElementById('scheduleId').value;
            const result = await contract.methods.getScheduleDetails(scheduleId).call();
            document.getElementById('scheduleDetails').innerHTML = `<p>Bus ID: ${result[0]}</p>
                                                                    <p>Start Destination: ${result[1]}</p>
                                                                    <p>End Destination: ${result[2]}</p>
                                                                    <p>Start Time: ${result[3]}</p>
                                                                    <p>End Time: ${result[4]}</p>
                                                                    <p>Available Seats: ${result[5]}</p>
                                                                    <p>Ticket Price: ${result[6]}</p>
                                                                    <p>Active: ${result[7]}</p>
                                                                    <p>Security Enabled: ${result[8]}</p>`;
        }

        async function issueTicket() {
            const scheduleId = document.getElementById('scheduleId').value;
            const seatNumber = document.getElementById('seatNumber').value;
            await contract.methods.issueTicket(scheduleId, seatNumber).send({ from: web3.eth.defaultAccount });
            document.getElementById('ticketIssued').innerHTML = `<p>Ticket issued successfully!</p>`;
        }
    </script>
</body>
</html>
